---
import Layout from '../layouts/Layout.astro';
import SiteHeader from '../components/SiteHeader.astro';
import PostCard from '../components/PostCard.astro';
import { postsIndex } from '../data/posts';
import { formatDate } from '../utils/formatDate';

const base = import.meta.env.BASE_URL;
const heroPost = postsIndex.find((post) => post.permalink.includes('meshtastic-questions')) ?? postsIndex[0];
const latest = postsIndex.slice(0, 3);
const archive = postsIndex.slice(3);
---

<Layout
  title="Mister Funable Field Notes — Creative playbooks"
  description="Hardware hacks, camera experiments, automation tinkering, and fandom logs from Mister Funable."
  ogImage={heroPost?.heroImage ?? `${base}medium-assets/04/img-01.png`}
>
  <SiteHeader />
  <main>
    <section
      id="hero"
      class="relative isolate overflow-hidden bg-gradient-to-br from-emerald-900/40 via-slate-900 to-slate-950 py-20"
    >
      <div class="pointer-events-none absolute inset-y-0 right-0 hidden w-1/2 bg-cover bg-center opacity-10 lg:block" style={`background-image: url('${base}medium-assets/04/img-01.png')`}></div>
      <div class="mx-auto flex max-w-6xl flex-col gap-12 px-4 lg:flex-row lg:items-center lg:px-6">
        <div class="space-y-6 lg:w-3/5">
          <p class="text-sm font-semibold uppercase tracking-[0.5em] text-lime-200/80">
            Mister Funable Field Notes
          </p>
          <h1 class="text-4xl font-semibold leading-tight text-white sm:text-5xl">
            Hardware builds, figure collecting, automation magic, and whatever else I can’t stop tinkering with.
          </h1>
          <p class="text-lg text-slate-300">
            Every article in this hub is mirrored from my Medium posts, paired with local assets for lightning-fast browsing,
            better archiving, and a single home for all the fun side quests.
          </p>
          <div class="flex flex-col gap-3 sm:flex-row">
            <a
              class="inline-flex items-center justify-center rounded-full bg-gradient-to-r from-lime-300/90 to-emerald-400 px-6 py-3 text-sm font-semibold text-ink shadow-lg shadow-emerald-500/30"
              href={`${base}posts/${heroPost.permalink}`}
            >
              Read highlighted post
            </a>
            <a
              class="inline-flex items-center justify-center rounded-full border border-white/20 px-6 py-3 text-sm font-semibold text-white transition hover:border-white/60 hover:bg-white/5"
              href="#posts"
            >
              Browse archive
            </a>
          </div>
          <div class="flex flex-wrap gap-6 text-sm text-slate-400">
            <div>
              <p class="text-2xl font-semibold text-white">{postsIndex.length}</p>
              <p>Stories archived</p>
            </div>
            <div>
              <p class="text-2xl font-semibold text-white"> {heroPost.readingTime} min</p>
              <p>Featured read</p>
            </div>
            <div>
              <p class="text-2xl font-semibold text-white">{formatDate(heroPost.publishedAt)}</p>
              <p>Latest update</p>
            </div>
          </div>
        </div>
        <div class="glass-card w-full space-y-4 p-6 lg:w-2/5">
          <div class="text-sm uppercase tracking-[0.4em] text-slate-400">Field Guide</div>
          <p class="text-lg font-semibold text-white">
            “Everything here is notebook energy—quick captures before I forget how I solved a bug,
            dialed a camera profile, or figured out a new workflow.”
          </p>
          <p class="text-sm text-slate-400">— Mister Funable</p>
        </div>
      </div>
    </section>

    <section id="latest" class="mx-auto max-w-6xl space-y-10 px-4 py-16 lg:px-6">
      <div class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
        <div>
          <p class="text-sm font-semibold uppercase tracking-[0.5em] text-lime-200/80">Latest dispatches</p>
          <h2 class="mt-2 text-3xl font-semibold text-white">Fresh drops from the field</h2>
        </div>
        <a class="text-sm font-semibold text-lime-200 hover:text-white" href="#posts">
          View full archive →
        </a>
      </div>
      <div class="grid gap-8">
        {latest.map((post, index) => (
          <PostCard post={post} featured={index === 0} />
        ))}
      </div>
    </section>

    <section
      id="topics"
      class="mx-auto grid max-w-6xl gap-6 px-4 pb-16 lg:grid-cols-3 lg:px-6"
    >
      <div class="glass-card p-6">
        <p class="text-sm font-semibold uppercase tracking-[0.4em] text-lime-200/80">Projects</p>
        <h3 class="mt-3 text-2xl font-semibold text-white">Device & desk builds</h3>
        <p class="mt-2 text-sm text-slate-300">LoRa gear, routers, desks, and random hardware that makes life easier.</p>
      </div>
      <div class="glass-card p-6">
        <p class="text-sm font-semibold uppercase tracking-[0.4em] text-lime-200/80">Automation</p>
        <h3 class="mt-3 text-2xl font-semibold text-white">n8n & scripting</h3>
        <p class="mt-2 text-sm text-slate-300">Local tunnelling, file handling, and the occasional AI-assisted workflow.</p>
      </div>
      <div class="glass-card p-6">
        <p class="text-sm font-semibold uppercase tracking-[0.4em] text-lime-200/80">Creative Ops</p>
        <h3 class="mt-3 text-2xl font-semibold text-white">Media & collecting</h3>
        <p class="mt-2 text-sm text-slate-300">Camera settings, figure hunts, writing, and other hobby rabbit holes.</p>
      </div>
    </section>

    <section id="posts" class="mx-auto max-w-6xl space-y-8 px-4 pb-24 lg:px-6">
      <div>
        <p class="text-sm font-semibold uppercase tracking-[0.5em] text-lime-200/80">Archive</p>
        <h2 class="mt-2 text-3xl font-semibold text-white">All posts</h2>
      </div>
      <div class="grid gap-6 md:grid-cols-2">
        {archive.map((post) => (
          <PostCard post={post} />
        ))}
      </div>
    </section>
  </main>
  <footer class="border-t border-white/10 bg-ink py-10">
    <div class="mx-auto flex max-w-6xl flex-col gap-4 px-4 text-sm text-slate-400 lg:flex-row lg:items-center lg:justify-between">
      <p>© {new Date().getFullYear()} Mister Funable Field Notes. Synced for GitHub Pages.</p>
      <div class="flex gap-6">
        <a class="hover:text-white" href="https://github.com/custom" target="_blank" rel="noreferrer">GitHub</a>
        <a class="hover:text-white" href="https://medium.com/@mister.funable" target="_blank" rel="noreferrer">Medium</a>
        <a class="hover:text-white" href="mailto:hello@example.com">Contact</a>
      </div>
    </div>
  </footer>
</Layout>
